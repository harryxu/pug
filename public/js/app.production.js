webpackJsonp([0],{0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(1),o=a(r),i=n(28),u=n(166),l=n(187),s=n(204),c=n(257),p=n(262),d=a(p),f=n(263),h=a(f),m=n(267),v=a(m);n(864),n(865);var b={apiGroups:{groups:[]},apiGroupRequest:{pending:!1,data:{}},activeApiSpec:{pending:!1,data:{}},activeApiResponse:{pending:!1,data:{}},apiSpecs:{},globalConfig:{basePath:window.basePath,baseUrl:window.baseUrl,user:pugConfig.user}},E=(0,u.createStore)(h.default,b,(0,u.compose)((0,u.applyMiddleware)(d.default,(0,c.routerMiddleware)(s.browserHistory)),window.devToolsExtension?window.devToolsExtension():function(e){return e})),y=(0,c.syncHistoryWithStore)(s.browserHistory,E);(0,i.render)(o.default.createElement(l.Provider,{store:E},o.default.createElement(s.Router,{history:y,routes:v.default})),document.getElementById("app"))},263:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groups:[]},t=arguments[1];if(t.type!=m.LOAD_API_GROUPS)return e;var n={groups:t.ready?t.data:e.groups,ready:t.ready};return Object.assign({},e,n)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pending:!1},t=arguments[1];switch(t.type){case m.CREATE_API_GROUP:case m.UPDATE_API_GROUP:return Object.assign({},e,{pending:t.pending,data:t.pending?{}:t.data});default:return e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pending:!1},t=arguments[1];switch(t.type){case m.CREATE_API_SPEC:case m.UPDATE_API_SPEC:case m.LOAD_ACTIVE_API_SPEC:return Object.assign({},e,{pending:t.pending,data:t.pending?{}:t.data});default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(t.type!=m.LOAD_API_SPECS)return e;if(t.pending)var n=e[t.groupId]?e[t.groupId].data:[];else var n=t.data;var a=r({},t.groupId,{pending:t.pending,data:n});return Object.assign({},e,a)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pending:!1,data:{}},t=arguments[1];switch(t.type){case m.CREATE_API_RESPONSE:case m.UPDATE_API_RESPONSE:case m.ACTIVE_API_RESPONSE:return{pending:t.pending,data:t.data||{}};default:return e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pending:!1,responses:[]},t=arguments[1];switch(t.type){case m.LOAD_API_RESPONSE_LIST:return{pending:t.pending,responses:t.data?t.data:e.responses};default:return e}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return e}Object.defineProperty(t,"__esModule",{value:!0});var d=n(257),f=n(166),h=n(264),m=a(h),v=(0,f.combineReducers)({apiGroups:o,apiGroupRequest:i,apiSpecs:l,activeApiSpec:u,activeApiResponse:s,apiResponses:c,globalConfig:p,routing:d.routerReducer});t.default=v},264:function(e,t,n){"use strict";function a(){return function(e,t){return e({type:_,ready:!1}),(0,y.webfetch)((0,y.apiUrl)("group")).then(function(e){return e.json()}).then(function(t){e(r(t))})}}function r(e){return{type:_,ready:!0,data:e}}function o(e){return E("group",P,e,"POST",function(e,t){return e.then(function(){return t(a())})})}function i(e){return E("group/"+e.id,S,e,"PUT",function(e,t){return e.then(function(){return t(a())})})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t,n){return t({type:A,groupId:e,pending:!0}),(0,y.webfetch)((0,y.apiUrl)("req?gid="+e)).then(function(e){return e.json()}).then(function(n){t(l(e,n))})}}function l(e,t){return{type:A,pending:!1,groupId:e,data:t}}function s(e){return E("req",O,e,"POST",function(e,t){return e.then(function(e){t((0,g.push)("/b/spec/"+e.id)),t(u(e.group_id))})})}function c(e){return E("req/"+e.id,C,e,"PUT",function(e,t){return e.then(function(e){return t(u(e.group_id))})})}function p(e){return function(t,n){return t({type:R,pending:!0}),(0,y.webfetch)((0,y.apiUrl)("req/"+e)).then(function(e){return e.json()}).then(function(e){t({type:R,pending:!1,data:e})})}}function d(e,t){return e.request_id=t,E("response",w,e,"POST",function(e,t){return e.then(function(e){t(m(e.request_id)),t(b(e))})})}function f(e){return E("response/"+e.id,T,e,"PUT",function(e,t){return e.then(function(e){t(m(e.request_id))})})}function h(e,t){return function(n,a){return(0,y.webfetch)((0,y.apiUrl)("response/"+e+"?request_id="+t),{method:"delete"}).then(function(){return n(m(t))})}}function m(e){return function(t,n){return t({type:k,pending:!0}),(0,y.webfetch)((0,y.apiUrl)("response?request_id="+e)).then(function(e){return e.json()}).then(function(e){return t(v(e)),!n().activeApiResponse.data.id&&e.length&&t(b(e[0])),e})}}function v(e){return{type:k,pending:!1,data:e}}function b(e){return{type:I,pending:!1,data:e}}function E(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return function(o,i){o({type:t,pending:!0});var u=(0,y.webfetch)((0,y.apiUrl)(e),{method:a,body:(0,y.createFormData)(n)}).then(function(e){return e.json()}).then(function(e){return o({type:t,pending:!1,data:e}),e});return r(u,o,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVE_API_RESPONSE=t.LOAD_API_RESPONSE_LIST=t.DELETE_API_RESPONSE=t.UPDATE_API_RESPONSE=t.CREATE_API_RESPONSE=t.LOAD_ACTIVE_API_SPEC=t.UPDATE_API_SPEC=t.CREATE_API_SPEC=t.LOAD_API_SPECS=t.UPDATE_API_GROUP=t.CREATE_API_GROUP=t.LOAD_API_GROUPS=void 0,t.loadApiGroups=a,t.receiveApiGroups=r,t.createApiGroup=o,t.updateApiGroup=i,t.loadApiSpecs=u,t.receiveApiSpecs=l,t.createApiSpec=s,t.updateApiSpec=c,t.loadActiveApiSpec=p,t.createApiResponse=d,t.updateApiResponse=f,t.deleteApiResponse=h,t.loadApiResponseList=m,t.receiveApiResponseList=v,t.activeApiResponse=b,t.commonWrite=E;var y=n(265),g=n(257),_=t.LOAD_API_GROUPS="LOAD_API_GROUPS",P=t.CREATE_API_GROUP="CREATE_API_GROUP",S=t.UPDATE_API_GROUP="UPDATE_API_GROUP",A=t.LOAD_API_SPECS="LOAD_API_SPECS",O=t.CREATE_API_SPEC="CREATE_API_SPEC",C=t.UPDATE_API_SPEC="UPDATE_API_SPEC",R=t.LOAD_ACTIVE_API_SPEC="LOAD_ACTIVE_API_SPEC",w=t.CREATE_API_RESPONSE="CREATE_API_RESPONSE",T=t.UPDATE_API_RESPONSE="UPDATE_API_RESPONSE",k=(t.DELETE_API_RESPONSE="DELETE_API_RESPONSE",t.LOAD_API_RESPONSE_LIST="LOAD_API_RESPONSE_LIST"),I=t.ACTIVE_API_RESPONSE="ACTIVE_API_RESPONSE"},265:function(e,t,n){"use strict";function a(e,t){t=t||{},t=Object.assign(t,{credentials:"same-origin"});var n=t.method||"GET";return"GET"!=n.toUpperCase()&&(t.headers||(t.headers={},t.headers["X-CSRF-TOKEN"]=pugConfig.csrfToken)),["PUT","PATCH","DELETE"].indexOf(n.toUpperCase())>=0&&t.body instanceof FormData&&(t.body.append("_method",n),t.method="POST"),fetch(e,t)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new FormData;return Object.keys(e).forEach(function(n){return t.append(n,e[n])}),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return basePath+"/"+e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,apiBase+"/"+e);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.webfetch=a,t.createFormData=r,t.path=o,t.apiUrl=i,n(266)},267:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=a(r),i=n(204),u=n(268),l=a(u),s=n(835),c=a(s),p=n(265);t.default=o.default.createElement(i.Route,{path:(0,p.path)(),component:l.default},o.default.createElement(i.IndexRoute,{component:c.default}),o.default.createElement(i.Route,{path:(0,p.path)("b/newspec"),component:c.default}),o.default.createElement(i.Route,{path:(0,p.path)("b/spec/:id"),component:c.default}))},268:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),s=a(l),c=n(187),p=n(269),d=n(790),f=a(d),h=n(831),m=a(h),v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"root"},s.default.createElement("div",{className:"wrapper"},s.default.createElement(p.Menu,{className:"appmenu",inverted:!0},s.default.createElement(p.Menu.Item,{header:!0},"Pug")),s.default.createElement(f.default,{split:"vertical",minSize:150,defaultSize:260},s.default.createElement(m.default,null),this.props.children)))}}]),t}(l.Component);t.default=(0,c.connect)()(v)},831:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{apiGroups:e.apiGroups,apiGroupRequest:e.apiGroupRequest,apiSpecs:e.apiSpecs}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),c=a(s),p=n(187),d=n(257),f=n(269),h=n(264),m=n(832),v=a(m),b=n(833),E=a(b),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showGroupForm:!1,editGroup:null},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.loadGropus()}},{key:"componentWillReceiveProps",value:function(e){e.apiGroupRequest.pending||this.setState({showGroupForm:!1})}},{key:"loadGropus",value:function(){this.props.dispatch((0,h.loadApiGroups)())}},{key:"handleNewApiClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="/b/newspec";e&&(t+="?gid="+e.id),this.props.dispatch((0,d.push)(t))}},{key:"handleGroupTitleClick",value:function(e,t){var n=e.target.classList.contains("active");n||this.props.apiSpecs[t.id]||this.props.dispatch((0,h.loadApiSpecs)(t.id))}},{key:"renderApiGroups",value:function(){var e=this.props.apiGroups,t=[];return e.groups.forEach(function(e,n){var a=this;t.push(c.default.createElement(f.Accordion.Title,{key:"title-"+n,onClick:function(t){a.handleGroupTitleClick(t,e)}},c.default.createElement(f.Icon,{name:"dropdown"}),e.name,c.default.createElement("div",{className:"btns"},c.default.createElement(f.Icon,{name:"edit",className:"icon-btn",title:"Edit",onClick:function(t){t.stopPropagation(),a.openGroupForm(e)}}),c.default.createElement(f.Icon,{name:"add",className:"icon-btn",title:"Add New API",onClick:function(t){t.stopPropagation(),a.handleNewApiClick(e)}})))),t.push(c.default.createElement(f.Accordion.Content,{key:"content-"+n},c.default.createElement(E.default,{group:e})))}.bind(this)),c.default.createElement("div",{className:"api-groups-list"},e.ready||e.groups.length>0?c.default.createElement(f.Accordion,{exclusive:!1,fluid:!0,styled:!0},t):"Loading groups...")}},{key:"openGroupForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({showGroupForm:!0,editGroup:e})}},{key:"closeGroupForm",value:function(){this.setState({showGroupForm:!1})}},{key:"handleGroupFormSubmit",value:function(e){e.id?this.props.dispatch((0,h.updateApiGroup)(e)):this.props.dispatch((0,h.createApiGroup)(e))}},{key:"renderApiGroupForm",value:function(){return c.default.createElement(f.Modal,{open:this.state.showGroupForm},c.default.createElement(f.Modal.Header,null,"Create Api Group"),c.default.createElement(f.Modal.Content,null,c.default.createElement(v.default,{onCancel:this.closeGroupForm.bind(this),onSubmit:this.handleGroupFormSubmit.bind(this),loading:this.props.apiGroupRequest.pending,edit:this.state.editGroup})))}},{key:"render",value:function(){return c.default.createElement("div",{className:"api-list-pane"},c.default.createElement("div",{className:"toolbar"},c.default.createElement(f.Icon,{name:"plus",size:"big",title:"New group",className:"square outline icon-btn btn-add-group",onClick:this.openGroupForm.bind(this)})),this.renderApiGroups(),this.renderApiGroupForm())}}]),t}(s.Component);t.default=(0,p.connect)(u)(y)},832:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),s=a(l),c=n(269),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"handleSubmit",value:function(e,t){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(t.formData)}},{key:"handleCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"render",value:function(){var e=this.props.edit||{},t=e.name,n=e.desc,a=e.id,r=a?s.default.createElement("input",{type:"hidden",name:"id",value:a}):null;return s.default.createElement(c.Form,{loading:this.props.loading,onSubmit:this.handleSubmit.bind(this)},s.default.createElement(c.Form.Input,{name:"name",defaultValue:t,autoFocus:!0,required:!0,label:"Name",placeholder:"Group Name"}),s.default.createElement(c.Form.TextArea,{name:"desc",defaultValue:n,label:"Description",placeholder:"Description"}),r,s.default.createElement("div",{className:"ui grid aligned"},s.default.createElement("div",{className:"right floated right aligned six wide column"},s.default.createElement(c.Button,{onClick:this.handleCancel.bind(this),type:"button"},"Cancel"),s.default.createElement(c.Button,{primary:!0,type:"submit"},a?"Save":"Create"))))}}]),t}(l.Component);t.default=p},833:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=e.apiSpecs[t.group.id]||{pending:!1,data:[]};return{specs:n,activeSpec:e.activeApiSpec.data}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(834),c=a(s),p=n(1),d=a(p),f=n(187),h=n(257),m=n(269),v=n(265),b=n(264),E=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"handleMenuItenClick",value:function(e,t){this.props.dispatch((0,b.activeApiResponse)({})),this.props.dispatch((0,h.push)((0,v.path)("b/spec/"+t.id)))}},{key:"renderMenu",value:function(e){return d.default.createElement(m.Menu,{vertical:!0,fluid:!0},e.map(function(e,t){var n=this;return d.default.createElement(m.Menu.Item,{key:t,name:e.name,content:e.name,active:this.props.activeSpec.id==e.id,onClick:function(t){return n.handleMenuItenClick(t,e)}})}.bind(this)))}},{key:"render",value:function(){var e=this.props.specs;return d.default.createElement("div",{className:"api-spec-list"},e.pending&&c.default.isEmpty(e.data)?"Loading...":this.renderMenu(e.data))}}]),t}(p.Component);t.default=(0,f.connect)(u)(E)},835:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return{globalConfig:e.globalConfig,spec:e.activeApiSpec}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(834),p=a(c),d=n(1),f=a(d),h=n(187),m=n(836),v=a(m),b=n(269),E=n(847),y=a(E),g=n(849),_=a(g),P=n(264),S=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spec:n.newSpec(),editing:!1},n.verbs=["GET","POST","PUT","PATCH","DELETE"].map(function(e){return{value:e,label:e}}),n}return u(t,e),s(t,[{key:"newSpec",value:function(){return{method:"GET",name:"",path:""}}},{key:"componentWillReceiveProps",value:function(e){var t=p.default.isEmpty(e.spec.data)?this.newSpec():e.spec.data;this.setState({spec:t}),this.props.spec.pending&&!e.spec.pending&&this.setState({editing:!1}),e.params.id!=this.props.params.id&&(e.params.id?this.loadSpec(e.params.id):this.setState({spec:this.newSpec()}))}},{key:"componentDidMount",value:function(){this.props.params.id&&this.loadSpec(this.props.params.id)}},{key:"loadSpec",value:function(e){this.props.dispatch((0,P.loadActiveApiSpec)(e))}},{key:"handleSaveSpec",value:function(e,t){e.preventDefault();var n=t.formData,a=this.state.spec;a.id?(n.id=a.id,this.props.dispatch((0,P.updateApiSpec)(t.formData))):(this.props.location.query.gid&&(n.group_id=this.props.location.query.gid),this.props.dispatch((0,P.createApiSpec)(t.formData)))}},{key:"handleUpdateSpec",value:function(e){var t=e;p.default.isPlainObject(e)||(t=r({},e.target.name,e.target.value)),this.setState({spec:Object.assign(this.state.spec,t)})}},{key:"handleRequestEditClick",value:function(e){e.preventDefault(),this.setState({editing:!0})}},{key:"renderRequestForm",value:function(){var e=this.state.spec,t=this.handleUpdateSpec.bind(this);return f.default.createElement(b.Form,{className:"api-box request-setting",loading:this.props.spec.pending,onSubmit:this.handleSaveSpec.bind(this)},f.default.createElement("div",{className:"request-info"},f.default.createElement("div",{className:"verb-select spec-field"},f.default.createElement(v.default,{name:"method",searchable:!1,options:this.verbs,value:e.method,clearable:!1,onChange:function(e){return t({method:e})}})),f.default.createElement("div",{className:"ui message base-path spec-field"},this.props.globalConfig.baseUrl,"/i/",this.props.globalConfig.user.id,"/"),f.default.createElement(b.Input,{name:"path",className:"path-input spec-field",placeholder:"Request path",value:e.path,onChange:t})),f.default.createElement("div",{className:"ui input name-input spec-field"},f.default.createElement("input",{type:"text",name:"name",placeholder:"Request Name",value:e.name,onChange:t})),f.default.createElement(b.Button,{className:"btn-save",primary:!0,size:"mini"},"Save"))}},{key:"renderRequestSummary",value:function(){var e=this.state.spec,t=this.props.globalConfig,n=t.baseUrl+"/i/"+t.user.id+"/"+e.path;return f.default.createElement("div",{className:"api-box request-setting request-summary"},f.default.createElement("div",{className:"ui labeled action input  fluid"},f.default.createElement("div",{className:"ui label blue request-method"},e.method),f.default.createElement("input",{className:"request-url",type:"text",readOnly:!0,value:n}),f.default.createElement(b.Button,{icon:!0,title:"Copy URL",onClick:function(){return(0,y.default)(n)}},f.default.createElement("i",{className:"copy icon"})),f.default.createElement(b.Button,{primary:!0,onClick:this.handleRequestEditClick.bind(this)},"Edit")))}},{key:"render",value:function(){var e=this.state,t=e.spec,n=e.editing;return f.default.createElement("div",{className:"api-spec-pane"},!t.id||n?this.renderRequestForm():this.renderRequestSummary(),t.id?f.default.createElement(_.default,{request:this.state.spec}):"")}}]),t}(d.Component);t.default=(0,h.connect)(l)(S)},847:function(e,t,n){"use strict";function a(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function r(e,t){var n,r,u,l,s,c,p=!1;t||(t={}),n=t.debug||!1;try{u=o(),l=document.createRange(),s=document.getSelection(),c=document.createElement("span"),c.textContent=e,c.setAttribute("style",["all: unset","position: fixed","top: 0","clip: rect(0, 0, 0, 0)","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),document.body.appendChild(c),l.selectNode(c),s.addRange(l);var d=document.execCommand("copy");if(!d)throw new Error("copy command was unsuccessful");p=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),p=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),r=a("message"in t?t.message:i),window.prompt(r,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(l):s.removeAllRanges()),c&&document.body.removeChild(c),u()}return p}var o=n(848),i="Copy to clipboard: #{key}, Enter";e.exports=r},848:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},849:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return{activeResponse:e.activeApiResponse,responseList:e.apiResponses}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(834),p=a(c),d=n(1),f=a(d),h=n(187),m=n(269),v=n(836),b=a(v),E=n(850),y=a(E);n(854),n(855),n(857),n(859),n(863);var g=n(264),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.newResponse();return n.state={response:a,editorMode:n.findEditorMode(a.content_type),deleteModalOpen:!1},n}return u(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,g.loadApiResponseList)(this.props.request.id));var e=this.props.activeResponse.data;e.id&&this.setState({response:e,editorMode:this.findEditorMode(e.content_type)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.activeResponse.data;t.id!=this.state.response.id&&this.setState({response:t,contentType:{value:t.content_type,mode:this.findEditorMode(t.content_type)}})}},{key:"findEditorMode",value:function(e){var t=this.constructor.contentTypes.find(function(t){return t.value==e});return t?t.mode:"plain_text"}},{key:"updateContentTypeState",value:function(e){var t=Object.assign({},this.state.response,{content_type:e.value});this.setState({editorMode:e.mode,response:t})}},{key:"handleFieldChange",value:function(e){var t=e;p.default.isPlainObject(e)||(t=r({},e.target.name,e.target.value)),this.setState({response:Object.assign({},this.state.response,t)})}},{key:"handleSaveResponse",value:function(){var e=this.state.response;e.id?this.props.dispatch((0,g.updateApiResponse)(e)):this.props.dispatch((0,g.createApiResponse)(e,this.props.request.id))}},{key:"handleDeleteResponse",value:function(){this.props.dispatch((0,g.deleteApiResponse)(this.state.response.id,this.props.request.id)),this.props.dispatch((0,g.activeApiResponse)(this.newResponse())),this.setState({deleteModalOpen:!1})}},{key:"newResponse",value:function(){return{name:"",status_code:200,content_type:"application/json",match_pattern:"",body:""}}},{key:"handleResponseMenuClick",value:function(e,t){this.props.dispatch((0,g.activeApiResponse)(t))}},{key:"handleNewResponseClick",value:function(e){this.props.dispatch((0,g.activeApiResponse)(this.newResponse()))}},{key:"renderMenu",value:function(){var e=this.props.responseList.responses.map(function(e,t){var n=this;return f.default.createElement(m.Menu.Item,{key:t,active:this.state.response.id==e.id,name:e.name,content:e.name,onClick:function(t){return n.handleResponseMenuClick(t,e)}})}.bind(this)),t=e.length>0?f.default.createElement(m.Menu,{vertical:!0,fluid:!0},e):null;return f.default.createElement("div",{className:"response-menu"},f.default.createElement("h5",null,"Responses",f.default.createElement(m.Icon,{name:"add circle",className:"icon-btn btn-add-resp",title:"Add New Response",onClick:this.handleNewResponseClick.bind(this)})),t)}},{key:"renderResponse",value:function(){var e=this,t=this.state,n=t.response,a=t.deleteModalOpen,r=f.default.createElement(m.Modal,{open:a,basic:!0,trigger:f.default.createElement(m.Button,{onClick:function(){return e.setState({deleteModalOpen:!0})},basic:!0,color:"red",type:"button"},"Delete")},f.default.createElement(m.Modal.Content,null,f.default.createElement("h1",null,"Delete this response, Really?")),f.default.createElement(m.Modal.Actions,null,f.default.createElement(m.Button,{onClick:function(){return e.setState({deleteModalOpen:!1})},inverted:!0},"Cancel"),f.default.createElement(m.Button,{color:"red",onClick:this.handleDeleteResponse.bind(this),inverted:!0},f.default.createElement(m.Icon,{name:"delete"})," Delete"))),o=f.default.createElement(m.Popup,{flowing:!0,hoverable:!0,positioning:"bottom center",trigger:f.default.createElement(m.Icon,{name:"question circle outline"})},"If regex match your request, this response will be used.",f.default.createElement("div",null,"Request will be encoding to a JSON string:",f.default.createElement("pre",null,'{\n  "querystr":"Query String from $_SERVER[\'QUERY_STRING\']",\n  "raw":"HTTP raw data from php://input",\n  "post":"POST data from $_POST encoding to JSON string"\n}')),"Regex will try to match above JSON string.",f.default.createElement("br",null),"The actual JSON will be an one line string."),i=f.default.createElement(m.Popup,{flowing:!0,hoverable:!0,trigger:f.default.createElement("div",{className:"help"},"Http response headers. JSON Object format, key value pair.")},"Sample:",f.default.createElement("pre",null,'{\n    "foo": "bar",\n    "Via": "pug"\n}'));return f.default.createElement(m.Form,{className:"response-detail",loading:this.props.activeResponse.pending},f.default.createElement(m.Form.Group,{widths:"equal"},f.default.createElement(m.Form.Input,{name:"name",label:"Name:",value:n.name||"",onChange:this.handleFieldChange.bind(this)}),f.default.createElement("div",{className:"field"},f.default.createElement("label",null,"Content Type"),f.default.createElement(b.default,{name:"content_type",options:this.constructor.contentTypes,value:this.state.response.content_type,onChange:this.updateContentTypeState.bind(this)})),f.default.createElement("div",{className:"field"},f.default.createElement("label",null,"Status Code"),f.default.createElement(b.default,{name:"status_code",options:this.constructor.statusCodes,value:n.status_code,onChange:function(t){return e.handleFieldChange({status_code:t.value})}}))),f.default.createElement(m.Form.Field,null,f.default.createElement("label",null,"Match Pattern ",o),f.default.createElement(m.TextArea,{rows:"1",className:"match-pattern",name:"match_pattern",placeholder:"Regex to match request",value:n.match_pattern||"",onChange:this.handleFieldChange.bind(this)})),f.default.createElement("div",{className:"field"},f.default.createElement(m.Accordion,{panels:[{title:"Headers",content:f.default.createElement("div",null,i,f.default.createElement(y.default,{mode:"json",theme:"github",name:"headers",fontSize:15,width:"100%",height:"150px",tabSize:2,value:n.headers||"",onChange:function(t){return e.handleFieldChange({v:t})},editorProps:{$blockScrolling:!0}}))}]})),f.default.createElement("div",{className:"field"},f.default.createElement("label",null,"Body"),f.default.createElement(y.default,{mode:this.state.editorMode,theme:"github",name:"body",fontSize:16,width:"100%",height:"300px",tabSize:2,value:n.body||"",onChange:function(t){return e.handleFieldChange({body:t})},editorProps:{$blockScrolling:!0}})),f.default.createElement("div",{className:"group"},f.default.createElement(m.Button,{onClick:this.handleSaveResponse.bind(this),primary:!0,type:"button"},"Save"),n.id?r:null))}},{key:"render",value:function(){return f.default.createElement("div",{className:"response-pane"},f.default.createElement("div",{className:"response-list"},this.renderMenu()),this.renderResponse());
}}]),t}(d.Component);_.contentTypes=[["application/json","json"],["application/xml","xml"],["text/html","html"],["text/plain","plain_text"]].map(function(e){return{value:e[0],label:e[0],mode:e[1]}}),_.statusCodes=[{value:200,label:"200 OK"},{value:201,label:"201 Created"},{value:300,label:"300 Multiple Choices"},{value:301,label:"301 Moved Permanently"},{value:302,label:"302 Found"},{value:400,label:"400 Bad Request"},{value:401,label:"401 Unauthorized"},{value:402,label:"402 Payment Required"},{value:403,label:"403 Forbidden"},{value:404,label:"404 Not Found"},{value:500,label:"500 Internal Server Error"}],t.default=(0,h.connect)(l)(_)},864:function(e,t){},865:function(e,t){}});